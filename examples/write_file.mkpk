!link ../lib/stdlib/syscall.mkpk

[[data]]
filepath: "/etc/hosts"

[[code]]
[main]
> sys_open "filepath"
jne exit

read_buffer:
> sys_read 16

# If rax == 0.
test rax, rax
jz exit

# Write the stack buffer
mov rdx, 16
mov rsi, rsp
mov rdi, 1
mov rax, 1
syscall

jmp read_buffer

exit:
> sys_exit
